<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Drew Dimmery drewd@nyu.edu" />
  <meta name="dcterms.date" content="2014-01-31" />
  <title>Quant II Recitation</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="reveal.js/css/reveal.min.css"/>
    <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
    </style>
    <link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">
  <link rel="stylesheet" media="print" href="reveal.js/css/print/pdf.css" />
  <!--[if lt IE 9]>
  <script src="reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">Quant II Recitation</h1>
    <h2 class="author">Drew Dimmery <script type="text/javascript">
<!--
h='&#110;&#x79;&#x75;&#46;&#x65;&#100;&#x75;';a='&#64;';n='&#100;&#114;&#x65;&#x77;&#100;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+e+'<\/'+'a'+'>');
// -->
</script><noscript>&#100;&#114;&#x65;&#x77;&#100;&#32;&#x61;&#116;&#32;&#110;&#x79;&#x75;&#32;&#100;&#x6f;&#116;&#32;&#x65;&#100;&#x75;</noscript></h2>
    <h3 class="date">January 31, 2014</h3>
</section>

<section id="what-is-this" class="slide level1">
<h1>What is this?</h1>
<ul>
<li class="fragment">This presentation created using <a href="http://yihui.name/knitr/">knitr</a> + <a href="http://johnmacfarlane.net/pandoc/">pandoc</a> + <a href="http://lab.hakim.se/reveal-js/">reveal.js</a></li>
<li class="fragment">I have created a recitation repository on github: <a href="https://github.com/ddimmery/Quant-II-Recitation">https://github.com/ddimmery/Quant-II-Recitation</a></li>
<li class="fragment">The recitation website will also be on github, at <a href="http://ddimmery.github.io/Quant-II-Recitation">http://ddimmery.github.io/Quant-II-Recitation</a></li>
<li class="fragment">This presentation is available on the course website.</li>
<li class="fragment"><p>The raw .Rmd file is available in the repository. You can create a handout version of it with the following commands (assuming knitr and pandoc are installed), first in R:</p>
<pre><code>require(knitr)
knit(presentation.Rmd)</code></pre></li>
<li class="fragment"><p>And then on the command line:</p>
<pre><code>pandoc presentation.md -o handout.pdf</code></pre></li>
</ul>
</section>
<section id="todays-topic" class="slide level1">
<h1>Today’s Topic</h1>
<ul>
<li class="fragment">Sharing is caring.
<ul>
<li class="fragment">If you don’t share your research (+ code and data) then what’s the point of doing it?</li>
</ul></li>
<li class="fragment">Today we will be discussing some necessary mechanics.
<ul>
<li class="fragment">R and how to bend it to your will</li>
<li class="fragment">Producing high quality tables / plots</li>
<li class="fragment">If there’s any time left, we can talk a little more about identification</li>
</ul></li>
</ul>
</section>
<section id="sharing" class="slide level1">
<h1>Sharing</h1>
<ul>
<li class="fragment">All homework will be submitted to me (preferably in hard copy)</li>
<li class="fragment">All replication code will be posted to a gist on github, and submitted to me via email.
<ul>
<li class="fragment"><a href="https://gist.github.com/">gist.github.com</a></li>
<li class="fragment">Code should have a header with relevant information (name, date created, date modified, input files, output files, etc)</li>
<li class="fragment"><strong>Code should be well commented</strong></li>
<li class="fragment">If you’d prefer to submit homework as some sort of knitr document, that is also fine. Just submit the <code>.Rmd</code> file.</li>
</ul></li>
<li class="fragment">All tables and plots should be of very high quality.</li>
<li class="fragment">Yes, this will take a non-trivial amount of time.</li>
</ul>
</section>
<section id="workflow" class="slide level1">
<h1>Workflow</h1>
<ul>
<li class="fragment">Find an editor and learn everything about it:
<ul>
<li class="fragment"><strong><a href="http://www.vim.org/">vim</a></strong> (+ <a href="http://www.vim.org/scripts/script.php?script_id=2628">Vim-R-plugin</a>)</li>
<li class="fragment"><a href="http://www.gnu.org/software/emacs/">emacs</a> (+ <a href="http://ess.r-project.org/">ESS</a> [Emacs Speaks Statistics])</li>
<li class="fragment"><a href="http://notepad-plus-plus.org/">Notepad++</a>, <a href="http://kate-editor.org/">Kate</a>, <a href="http://www.sublimetext.com/">Sublime</a>, etc</li>
<li class="fragment"><strong><a href="http://www.rstudio.com/">Rstudio</a></strong></li>
<li class="fragment"><a href="http://www.eclipse.org/">Eclipse</a> (+ <a href="http://www.walware.de/goto/statet">StatET</a>)</li>
</ul></li>
<li class="fragment">Familiarize yourself with version control software
<ul>
<li class="fragment"><a href="http://git-scm.com/">git</a> (<a href="https://github.com/">github</a> or <a href="https://code.google.com/p/tortoisegit/">TortoiseGit</a>)</li>
<li class="fragment">or just <a href="https://www.dropbox.com/">Dropbox</a></li>
</ul></li>
</ul>
</section>
<section id="when-things-break" class="slide level1">
<h1>When things break</h1>
<ul>
<li class="fragment">Documentation - Ex: <code>?lm</code></li>
<li class="fragment"><a href="http://google.com">Google</a></li>
<li class="fragment">CRAN (Reference manuals, vignettes, etc) - Ex: <a href="http://cran.r-project.org/web/packages/AER/index.html">http://cran.r-project.org/web/packages/AER/index.html</a></li>
<li class="fragment">JSS - Ex: <a href="http://www.jstatsoft.org/v27/i02">http://www.jstatsoft.org/v27/i02</a></li>
<li class="fragment">Stack Overflow - <a href="http://stackoverflow.com/questions/tagged/r">http://stackoverflow.com/questions/tagged/r</a></li>
<li class="fragment">Listservs - <a href="http://www.r-project.org/mail.html">http://www.r-project.org/mail.html</a></li>
</ul>
</section>
<section id="resources" class="slide level1">
<h1>Resources</h1>
<ul>
<li class="fragment"><a href="http://heather.cs.ucdavis.edu/~matloff/132/NSPpart.pdf">The Art of R Programming</a> - N. Matloff</li>
<li class="fragment"><a href="http://www.stats.ox.ac.uk/pub/MASS4/">Modern Applied Statistics with S</a> - W. Venables and B. Ripley</li>
<li class="fragment"><a href="http://adv-r.had.co.nz/">Advanced R Programming</a> - forthcoming, H. Wickham</li>
<li class="fragment"><a href="http://www.burns-stat.com/documents/books/the-r-inferno/">The R Inferno</a> - P. Burns</li>
<li class="fragment"><a href="https://github.com/pablobarbera/Rdataviz">Rdataviz</a> - a talk by P. Barberá on ggplot2</li>
</ul>
</section>
<section id="reading-r-documentation" class="slide level1">
<h1>Reading R Documentation</h1>
<ul>
<li class="fragment"><a href="http://stat.ethz.ch/R-manual/R-patched/library/stats/html/lm.html" target="_blank"><code>?lm</code></a></li>
</ul>
</section>
<section id="cran-documentation" class="slide level1">
<h1>CRAN documentation</h1>
<ul>
<li class="fragment"><a href="http://cran.r-project.org/web/packages/AER/index.html" target="_blank">AER</a></li>
</ul>
</section>
<section id="jss" class="slide level1">
<h1>JSS</h1>
<ul>
<li class="fragment"><a href="http://www.jstatsoft.org/v27/i02/"><code>plm</code></a></li>
</ul>
</section>
<section id="confusing-things" class="slide level1">
<h1>Confusing Things</h1>
<ul>
<li class="fragment">At the prompt, &gt; means you’re good to go, + means a parenthesis or bracket is open.</li>
<li class="fragment">Case sensitive</li>
<li class="fragment">Use / in path names. Not \.</li>
<li class="fragment">R uses variables – there is no “sheet” here, like in Stata</li>
<li class="fragment"><strong>R is a programming language</strong></li>
<li class="fragment">More on errors later!</li>
</ul>
</section>
<section id="using-third-party-code" class="slide level1">
<h1>Using Third-party Code</h1>
<ul>
<li class="fragment">Relevant commands are: <code>install.packages</code> and <code>library</code></li>
<li class="fragment"><p>Find the appropriate packages and commands with Google and via searching in R:</p>
<pre><code>?covariance
??covariance
install.packages(&quot;sandwich&quot;)
library(&quot;sandwich&quot;)
?vcovHC</code></pre></li>
</ul>
</section>
<section id="data-types" class="slide level1">
<h1>Data types</h1>
<ul>
<li class="fragment">Character - strings</li>
<li class="fragment">Double / Numeric - numbers</li>
<li class="fragment">Logical - true/false</li>
<li class="fragment">Factor - unordered categorical variables</li>
<li class="fragment">Objects - its complicated</li>
</ul>
</section>
<section id="character" class="slide level1">
<h1>Character</h1>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">str &lt;-<span class="st"> &quot;This is a string&quot;</span></code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(<span class="st">&quot;This&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;string&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)</code></pre>
<pre><code>## [1] &quot;This is a string&quot;</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.character</span>(<span class="dv">99</span>)</code></pre>
<pre><code>## [1] &quot;99&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(str)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
</div>
</section>
<section id="numeric" class="slide level1">
<h1>Numeric</h1>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">num &lt;-<span class="st"> </span><span class="fl">99.867</span>
<span class="kw">class</span>(num)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">round</span>(num, <span class="dt">digits =</span> <span class="dv">2</span>)</code></pre>
<pre><code>## [1] 99.87</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">round</span>(str, <span class="dt">digits =</span> <span class="dv">2</span>)</code></pre>
<pre><code>## Error: non-numeric argument to mathematical function</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">pi</code></pre>
<pre><code>## [1] 3.142</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">exp</span>(<span class="dv">1</span>)</code></pre>
<pre><code>## [1] 2.718</code></pre>
<ul>
<li class="fragment"><code>sin</code>, <code>exp</code>, <code>log</code>, <code>factorial</code>, <code>choose</code>, <code>BesselJ</code>, etc</li>
</ul>
</div>
</section>
<section id="logical" class="slide level1">
<h1>Logical</h1>
<ul>
<li class="fragment">The logical type allows us to make statements about truth</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> ==<span class="st"> </span><span class="dv">4</span></code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="dv">2</span> ==<span class="st"> </span><span class="dv">4</span>)</code></pre>
<pre><code>## [1] &quot;logical&quot;</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">str !=<span class="st"> </span>num</code></pre>
<pre><code>## [1] TRUE</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="st">&quot;34&quot;</span> ==<span class="st"> </span><span class="dv">34</span></code></pre>
<pre><code>## [1] TRUE</code></pre>
<ul>
<li class="fragment"><code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>!</code>, <code>&amp;</code>, <code>|</code>, <code>any</code>, <code>all</code>, etc</li>
</ul>
</div>
</section>
<section id="objects" class="slide level1">
<h1>Objects</h1>
<ul>
<li class="fragment">Many functions will return objects rather than a single datatype.</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">X &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">100</span>
Y &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, X)
out.lm &lt;-<span class="st"> </span><span class="kw">lm</span>(Y ~<span class="st"> </span>X)
<span class="kw">class</span>(out.lm)</code></pre>
<pre><code>## [1] &quot;lm&quot;</code></pre>
<ul>
<li class="fragment">Objects can have other data embedded inside them</li>
</ul>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">out.lm$rank</code></pre>
<pre><code>## [1] 2</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(out.lm$rank)</code></pre>
<pre><code>## [1] &quot;integer&quot;</code></pre>
</div>
</section>
<section id="data-structures" class="slide level1">
<h1>Data Structures</h1>
<ul>
<li class="fragment"><p>There are other ways to hold data, though:</p>
<ul>
<li class="fragment">Vectors</li>
<li class="fragment">Lists</li>
<li class="fragment">Matrices</li>
<li class="fragment">Dataframes</li>
</ul></li>
</ul>
</section>
<section id="vectors" class="slide level1">
<h1>Vectors</h1>
<ul>
<li class="fragment">Almost everything in R is a vector.</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.vector</span>(<span class="dv">4</span>)</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">4</span></code></pre>
<pre><code>## [1] 4</code></pre>
</div>
<div class="fragment">
<ul>
<li class="fragment">We can combine vectors with <code>c</code>:</li>
</ul>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)
vec</code></pre>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, vec)</code></pre>
<pre><code>## [1] &quot;2&quot; &quot;3&quot; &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
</div>
</section>
<section id="vectors-cont." class="slide level1">
<h1>Vectors (cont.)</h1>
<ul>
<li class="fragment">Sometimes R does some weird stuff:</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>) +<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</code></pre>
<pre><code>## [1] 2 4 4 6</code></pre>
<ul>
<li class="fragment">It “recycles” the shorter vector:</li>
</ul>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>) +<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>)</code></pre>
<pre><code>## [1] 2 4 4 6</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>) +<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</code></pre>
<pre><code>## Warning: longer object length is not a multiple of shorter object length</code></pre>
<pre><code>## [1] 2 4 6 5</code></pre>
</div>
</section>
<section id="more-vectors" class="slide level1">
<h1>More Vectors</h1>
<ul>
<li class="fragment">We can index vectors in several ways</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">vec[<span class="dv">1</span>]</code></pre>
<pre><code>## [1] &quot;a&quot;</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(vec) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;first&quot;</span>, <span class="st">&quot;second&quot;</span>, <span class="st">&quot;third&quot;</span>)
vec</code></pre>
<pre><code>##  first second  third 
##    &quot;a&quot;    &quot;b&quot;    &quot;c&quot;</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">vec[<span class="st">&quot;first&quot;</span>]</code></pre>
<pre><code>## first 
##   &quot;a&quot;</code></pre>
</div>
</section>
<section id="missingness" class="slide level1">
<h1>Missingness</h1>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">vec[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="ot">NA</span>
vec</code></pre>
<pre><code>##  first second  third 
##     NA    &quot;b&quot;    &quot;c&quot;</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.na</span>(vec)</code></pre>
<pre><code>##  first second  third 
##   TRUE  FALSE  FALSE</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">vec[!<span class="kw">is.na</span>(vec)]  <span class="co"># vec[complete.cases(vec)]</span></code></pre>
<pre><code>## second  third 
##    &quot;b&quot;    &quot;c&quot;</code></pre>
</div>
</section>
<section id="lists" class="slide level1">
<h1>Lists</h1>
<ul>
<li class="fragment">Lists are similar to vectors, but they allow for arbitrary mixing of types and lengths.</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">listie &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">first =</span> vec, <span class="dt">second =</span> num)
listie</code></pre>
<pre><code>## $first
##  first second  third 
##     NA    &quot;b&quot;    &quot;c&quot; 
## 
## $second
## [1] 99.87</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">listie[[<span class="dv">1</span>]]</code></pre>
<pre><code>##  first second  third 
##     NA    &quot;b&quot;    &quot;c&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">listie$first</code></pre>
<pre><code>##  first second  third 
##     NA    &quot;b&quot;    &quot;c&quot;</code></pre>
</div>
</section>
<section id="matrices" class="slide level1">
<h1>Matrices</h1>
<ul>
<li class="fragment"><span class="math">\[A = \begin{pmatrix}1 &amp; 3\\ 2 &amp; 4\end{pmatrix}\]</span></li>
<li class="fragment"><span class="math">\(A_{ij}\)</span></li>
<li class="fragment"><span class="math">\(A_{1,2} = 3\)</span></li>
<li class="fragment"><span class="math">\(A_{1,\cdot} = (1,3)\)</span></li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">A &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)
A</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">A[<span class="dv">1</span>, <span class="dv">2</span>]</code></pre>
<pre><code>## [1] 3</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">A[<span class="dv">1</span>, ]</code></pre>
<pre><code>## [1] 1 3</code></pre>
</div>
</section>
<section id="matrix-operations" class="slide level1">
<h1>Matrix Operations</h1>
<ul>
<li class="fragment">Its very easy to manipulate matrices:</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">solve</span>(A)  <span class="co">#A^{-1}</span></code></pre>
<pre><code>##      [,1] [,2]
## [1,]   -2  1.5
## [2,]    1 -0.5</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">10</span> *<span class="st"> </span>A</code></pre>
<pre><code>##      [,1] [,2]
## [1,]   10   30
## [2,]   20   40</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">B &lt;-<span class="st"> </span><span class="kw">diag</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
B</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    0
## [2,]    0    2</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">A %*%<span class="st"> </span>B</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    8</code></pre>
</div>
</section>
<section id="more-matrix-ops." class="slide level1">
<h1>More Matrix Ops.</h1>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">A %*%<span class="st"> </span><span class="kw">diag</span>(<span class="dv">3</span>)</code></pre>
<pre><code>## Error: non-conformable arguments</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t</span>(A)  <span class="co"># A&#39;</span></code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rbind</span>(A, B)</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## [3,]    1    0
## [4,]    0    2</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cbind</span>(A, B)</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    3    1    0
## [2,]    2    4    0    2</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) %x%<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)  <span class="co"># Kronecker Product</span></code></pre>
<pre><code>## [1] 1 1 2 2 3 3</code></pre>
</div>
</section>
<section id="naming-things" class="slide level1">
<h1>Naming Things</h1>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rownames</span>(A)</code></pre>
<pre><code>## NULL</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rownames</span>(A) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>)
<span class="kw">colnames</span>(A) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)
A</code></pre>
<pre><code>##   c d
## a 1 3
## b 2 4</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">A[, <span class="st">&quot;d&quot;</span>]</code></pre>
<pre><code>## a b 
## 3 4</code></pre>
<ul>
<li class="fragment">Matrices are vectors:</li>
</ul>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">A[<span class="dv">3</span>]</code></pre>
<pre><code>## [1] 3</code></pre>
</div>
</section>
<section id="dataframes" class="slide level1">
<h1>Dataframes</h1>
<ul>
<li class="fragment"><p>The workhorse</p></li>
<li class="fragment"><p>Basically just a matrix that allows mixing of types.</p></li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(iris)
<span class="kw">head</span>(iris)</code></pre>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</section>
<section id="control-flow" class="slide level1">
<h1>Control Flow</h1>
<ul>
<li class="fragment">loops</li>
<li class="fragment">if/else</li>
<li class="fragment">functions</li>
<li class="fragment">useful stock functions to know</li>
</ul>
</section>
<section id="loops" class="slide level1">
<h1>Loops</h1>
<ul>
<li class="fragment">for loops - just a way to say “do this for each element of the index”</li>
<li class="fragment">“this” is defined in what follows the “for” expression</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">for (i in <span class="dv">1</span>:<span class="dv">5</span>) {
    <span class="kw">cat</span>(i *<span class="st"> </span><span class="dv">10</span>, <span class="st">&quot; &quot;</span>)
}</code></pre>
<pre><code>## 10  20  30  40  50</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">for (i in <span class="dv">1</span>:<span class="kw">length</span>(vec)) {
    <span class="kw">cat</span>(vec[i], <span class="st">&quot; &quot;</span>)
}</code></pre>
<pre><code>## NA  b  c</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">for (i in vec) {
    <span class="kw">cat</span>(i, <span class="st">&quot; &quot;</span>)
}</code></pre>
<pre><code>## NA  b  c</code></pre>
</div>
</section>
<section id="ifelse" class="slide level1">
<h1>If/Else</h1>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">if (vec[<span class="dv">2</span>] ==<span class="st"> &quot;b&quot;</span>) <span class="kw">print</span>(<span class="st">&quot;Hello World!&quot;</span>)</code></pre>
<pre><code>## [1] &quot;Hello World!&quot;</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">if (vec[<span class="dv">3</span>] ==<span class="st"> &quot;a&quot;</span>) {
    <span class="kw">print</span>(<span class="st">&quot;Hello World!&quot;</span>)
} else {
    <span class="kw">print</span>(<span class="st">&quot;!dlroW olleH&quot;</span>)
}</code></pre>
<pre><code>## [1] &quot;!dlroW olleH&quot;</code></pre>
</div>
</section>
<section id="vectorized-ifelse" class="slide level1">
<h1>Vectorized If/Else</h1>
<ul>
<li class="fragment">Conditional execution on each element of a vector</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">vec &lt;-<span class="st"> </span>letters[<span class="dv">1</span>:<span class="dv">3</span>]
new &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">length =</span> <span class="kw">length</span>(vec))
for (i in <span class="dv">1</span>:<span class="kw">length</span>(vec)) {
    if (vec[i] ==<span class="st"> &quot;b&quot;</span>) {
        new[i] &lt;-<span class="st"> </span><span class="dv">13</span>
    } else {
        new[i] &lt;-<span class="st"> </span><span class="dv">0</span>
    }
}
new</code></pre>
<pre><code>## [1]  0 13  0</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">new &lt;-<span class="st"> </span><span class="kw">ifelse</span>(vec ==<span class="st"> &quot;b&quot;</span>, <span class="dv">13</span>, <span class="dv">0</span>)
new</code></pre>
<pre><code>## [1]  0 13  0</code></pre>
</div>
</section>
<section id="functions" class="slide level1">
<h1>Functions</h1>
<ul>
<li class="fragment"><span class="math">\(f : X \to Y\)</span></li>
<li class="fragment">Functions in R are largely the same. (“Pure functions”)</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">add3 &lt;-<span class="st"> </span>function(X) {
    <span class="kw">return</span>(X +<span class="st"> </span><span class="dv">3</span>)
}
<span class="kw">add3</span>(<span class="dv">2</span>)</code></pre>
<pre><code>## [1] 5</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">makeGroups &lt;-<span class="st"> </span>function(groups, <span class="dt">members =</span> <span class="dv">1</span>) {
    <span class="kw">return</span>((<span class="dv">1</span>:groups) %x%<span class="st"> </span><span class="kw">rep</span>(<span class="dv">1</span>, members))
}
<span class="kw">makeGroups</span>(<span class="dv">5</span>)</code></pre>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeGroups</span>(<span class="dv">5</span>, <span class="dv">2</span>)</code></pre>
<pre><code>##  [1] 1 1 2 2 3 3 4 4 5 5</code></pre>
</div>
</section>
<section id="useful-functions" class="slide level1">
<h1>Useful Functions</h1>
<ul>
<li class="fragment"><p>Note: Most functions don’t do complete case analysis by default (usually option na.rm=TRUE)</p></li>
<li class="fragment"><p><code>print</code>, <code>cat</code>, <code>paste</code>, <code>with</code>, <code>length</code>, <code>sort</code>, <code>order</code>, <code>unique</code>, <code>rep</code>, <code>nrow</code>, <code>ncol</code>, <code>complete.cases</code>, <code>subset</code>, <code>merge</code>, <code>mean</code>, <code>sum</code>, <code>sd</code>, <code>var</code>, <code>lag</code>,<code>lm</code>, <code>model.matrix</code>,<code>coef</code>, <code>vcov</code>, <code>residuals</code>, <code>vcovHC</code> (from <code>sandwich</code>), <code>ivreg</code> (from <code>AER</code>), <code>countrycode</code> (from<code>countrycode</code>),<code>summary</code>, <code>pdf</code>, <code>plot</code>, Tools from <code>plm</code>, and many more.</p></li>
</ul>
</section>
<section id="distributional-functions" class="slide level1">
<h1>Distributional Functions</h1>
<ul>
<li class="fragment"><code>?Distributions</code></li>
<li class="fragment">They have a consistent naming scheme.</li>
<li class="fragment"><code>rnorm</code>, <code>dnorm</code>, <code>qnorm</code>, <code>pnorm</code></li>
<li class="fragment"><code>rdist</code> - generate random variable from dist</li>
<li class="fragment"><code>ddist</code> - density function of dist</li>
<li class="fragment"><code>qdist</code> - quantile function of dist</li>
<li class="fragment"><code>pdist</code> - distribution function of dist</li>
<li class="fragment">look at documentation for parameterization</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rnorm</span>(<span class="dv">16</span>)</code></pre>
<pre><code>##  [1]  0.4597  2.2269  2.7330  0.4495 -0.2498  0.2645  0.4470  0.9376
##  [9]  1.3010  0.5880  1.3179  0.3703 -1.2490 -1.0140  1.3069 -1.4451</code></pre>
</div>
</section>
<section id="robust-ses" class="slide level1">
<h1>Robust SEs</h1>
<table class="sourceCode r numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="sourceCode"><pre><code class="sourceCode r">robust.se &lt;-<span class="st"> </span>function(model,<span class="dt">cluster=</span><span class="dv">1</span>:<span class="kw">length</span>(model$residuals)) {
  <span class="kw">require</span>(sandwich)
  <span class="kw">require</span>(lmtest)
  M &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(cluster))
  N &lt;-<span class="st"> </span><span class="kw">length</span>(cluster)
  K &lt;-<span class="st"> </span>model$rank
  dfc &lt;-<span class="st"> </span>(M/(M -<span class="st"> </span><span class="dv">1</span>)) *<span class="st"> </span>((N -<span class="st"> </span><span class="dv">1</span>)/(N -<span class="st"> </span>K))
  uj  &lt;-<span class="st"> </span><span class="kw">apply</span>(
               <span class="kw">estfun</span>(model),
               <span class="dv">2</span>,
               function(x) <span class="kw">tapply</span>(x, cluster, sum)
              )
  rcse.cov &lt;-<span class="st"> </span>dfc *<span class="st"> </span><span class="kw">sandwich</span>(model,<span class="dt">meat =</span> <span class="kw">crossprod</span>(uj)/N)
  rcse.se &lt;-<span class="st"> </span><span class="kw">coeftest</span>(model, rcse.cov)
  <span class="kw">return</span>(<span class="kw">list</span>(rcse.cov, rcse.se))
}</code></pre></td></tr></table>
</section>
<section id="multiple-dispactch" class="slide level1">
<h1>Multiple Dispactch</h1>
<ul>
<li class="fragment">Sometimes functions will behave differently based on context:</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(vec)</code></pre>
<pre><code>##    Length     Class      Mode 
##         3 character character</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1.00    1.75    2.50    2.50    3.25    4.00</code></pre>
</div>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(iris[, <span class="dv">1</span>:<span class="dv">4</span>])</code></pre>
<pre><code>##   Sepal.Length   Sepal.Width    Petal.Length   Petal.Width 
##  Min.   :4.30   Min.   :2.00   Min.   :1.00   Min.   :0.1  
##  1st Qu.:5.10   1st Qu.:2.80   1st Qu.:1.60   1st Qu.:0.3  
##  Median :5.80   Median :3.00   Median :4.35   Median :1.3  
##  Mean   :5.84   Mean   :3.06   Mean   :3.76   Mean   :1.2  
##  3rd Qu.:6.40   3rd Qu.:3.30   3rd Qu.:5.10   3rd Qu.:1.8  
##  Max.   :7.90   Max.   :4.40   Max.   :6.90   Max.   :2.5</code></pre>
<ul>
<li class="fragment">Why? <code>?summary</code> <code>?summary.lm</code></li>
</ul>
</div>
</section>
<section id="the-apply-family" class="slide level1">
<h1>The *apply family</h1>
<ul>
<li class="fragment">These functions allow one to <em>efficiently</em> perform a large number of actions on data.</li>
<li class="fragment"><code>apply</code> - performs actions on the rows or columns of a matrix/array (1 for rows, 2 for columns, 3 for ??)</li>
<li class="fragment"><code>sapply</code> - performs actions on every element of a vector</li>
<li class="fragment"><code>tapply</code> - performs actions on a vector by group</li>
<li class="fragment"><code>replicate</code> - performs the same action a given number of times</li>
</ul>
</section>
<section id="apply" class="slide level1">
<h1>apply</h1>
<pre class="sourceCode r"><code class="sourceCode r">A</code></pre>
<pre><code>##   c d
## a 1 3
## b 2 4</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(A, <span class="dv">1</span>, sum)</code></pre>
<pre><code>## a b 
## 4 6</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(A, <span class="dv">2</span>, mean)</code></pre>
<pre><code>##   c   d 
## 1.5 3.5</code></pre>
</section>
<section id="sapply" class="slide level1">
<h1>sapply</h1>
<pre class="sourceCode r"><code class="sourceCode r">vec</code></pre>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(vec, function(x) <span class="kw">paste0</span>(x, <span class="st">&quot;.vec&quot;</span>))</code></pre>
<pre><code>##       a       b       c 
## &quot;a.vec&quot; &quot;b.vec&quot; &quot;c.vec&quot;</code></pre>
<ul>
<li class="fragment">Can be accomplished more simply with:</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste0</span>(vec, <span class="st">&quot;.vec&quot;</span>)</code></pre>
<pre><code>## [1] &quot;a.vec&quot; &quot;b.vec&quot; &quot;c.vec&quot;</code></pre>
<ul>
<li class="fragment"><p>Why?</p></li>
<li class="fragment"><p><code>replicate</code> is basically just <code>sapply(1:N,funct)</code> where <code>funct</code> never uses the index.</p></li>
</ul>
</div>
</section>
<section id="tapply" class="slide level1">
<h1>tapply</h1>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(<span class="dv">1</span>:<span class="dv">10</span>, <span class="kw">makeGroups</span>(<span class="dv">5</span>, <span class="dv">2</span>), mean)</code></pre>
<pre><code>##   1   2   3   4   5 
## 1.5 3.5 5.5 7.5 9.5</code></pre>
</section>
<section id="working-with-data" class="slide level1">
<h1>Working With Data</h1>
<ul>
<li class="fragment">Input</li>
<li class="fragment">Output</li>
</ul>
</section>
<section id="input" class="slide level1">
<h1>Input</h1>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setwd</span>(<span class="st">&quot;~/github/Quant II Recitation/2014-01-31/&quot;</span>)
<span class="kw">dir</span>()</code></pre>
<pre><code>## [1] &quot;apsrtable.png&quot;    &quot;figure&quot;           &quot;iris.csv&quot;        
## [4] &quot;presentation.Rmd&quot; &quot;stargazer.png&quot;    &quot;test.md&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">iris &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;iris.csv&quot;</span>)</code></pre>
<ul>
<li class="fragment"><p>If data is, for instance, a Stata .dta file, use <code>read.dta</code> from the <code>foreign</code> package.</p></li>
<li class="fragment"><p>Useful options for reading data: <code>sep</code>, <code>na.strings</code>, <code>stringsAsFactors</code></p></li>
<li class="fragment"><p>For different formats, Google it.</p></li>
</ul>
</div>
</section>
<section id="simulate-some-data" class="slide level1">
<h1>Simulate some Data</h1>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1023</span>)  <span class="co"># Important for replication</span>
X &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="dv">5</span>)
Y &lt;-<span class="st"> </span><span class="kw">sin</span>(<span class="dv">5</span> *<span class="st"> </span>X) *<span class="st"> </span><span class="kw">exp</span>(<span class="kw">abs</span>(X)) +<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>)
dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(X, Y)
<span class="kw">plot</span>(X, Y, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(-<span class="dv">50</span>, <span class="dv">50</span>))</code></pre>
<figure>
<img src="figure/graphics.png" />
</figure>
</section>
<section id="regression-output" class="slide level1">
<h1>Regression Output</h1>
<pre class="sourceCode r"><code class="sourceCode r">dat.lm &lt;-<span class="st"> </span><span class="kw">lm</span>(Y ~<span class="st"> </span>X, <span class="dt">data =</span> dat)
dat.lm</code></pre>
<pre><code>## 
## Call:
## lm(formula = Y ~ X, data = dat)
## 
## Coefficients:
## (Intercept)            X  
##     -216634       183687</code></pre>
</section>
<section id="regression-output-1" class="slide level1">
<h1>Regression Output</h1>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(dat.lm)</code></pre>
<pre><code>## 
## Call:
## lm(formula = Y ~ X, data = dat)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -2.10e+08 -4.19e+05  2.01e+05  8.17e+05  9.08e+06 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  -216634     212126   -1.02     0.31    
## X             183687      43470    4.23  2.6e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 6710000 on 998 degrees of freedom
## Multiple R-squared:  0.0176, Adjusted R-squared:  0.0166 
## F-statistic: 17.9 on 1 and 998 DF,  p-value: 2.6e-05</code></pre>
</section>
<section id="pretty-output" class="slide level1">
<h1>Pretty Output</h1>
<ul>
<li class="fragment">How do we get LaTeX output?</li>
<li class="fragment">The <code>xtable</code> package:</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(xtable)
<span class="kw">xtable</span>(dat.lm)</code></pre>
<pre><code>## % latex table generated in R 3.0.2 by xtable 1.7-1 package
## % Tue Jan 28 23:20:03 2014
## \begin{table}[ht]
## \centering
## \begin{tabular}{rrrrr}
##   \hline
##  &amp; Estimate &amp; Std. Error &amp; t value &amp; Pr($&gt;$$|$t$|$) \\ 
##   \hline
## (Intercept) &amp; -216633.6722 &amp; 212125.4622 &amp; -1.02 &amp; 0.3074 \\ 
##   X &amp; 183687.1735 &amp; 43469.5839 &amp; 4.23 &amp; 0.0000 \\ 
##    \hline
## \end{tabular}
## \end{table}</code></pre>
</div>
</section>
<section id="xtable" class="slide level1">
<h1>xtable</h1>
<ul>
<li class="fragment"><code>xtable</code> works on any sort of matrix</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtable</span>(A)</code></pre>
<pre><code>## % latex table generated in R 3.0.2 by xtable 1.7-1 package
## % Tue Jan 28 23:20:03 2014
## \begin{table}[ht]
## \centering
## \begin{tabular}{rrr}
##   \hline
##  &amp; c &amp; d \\ 
##   \hline
## a &amp; 1.00 &amp; 3.00 \\ 
##   b &amp; 2.00 &amp; 4.00 \\ 
##    \hline
## \end{tabular}
## \end{table}</code></pre>
</div>
</section>
<section id="xtable-1" class="slide level1">
<h1>xtable</h1>
<ul>
<li class="fragment">This is what <code>xtable</code> does with the <code>lm</code> object:</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">summary</span>(dat.lm)$coefficients)</code></pre>
<pre><code>## [1] &quot;matrix&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtable</span>(<span class="kw">summary</span>(dat.lm)$coefficients)</code></pre>
<pre><code>## % latex table generated in R 3.0.2 by xtable 1.7-1 package
## % Tue Jan 28 23:20:03 2014
## \begin{table}[ht]
## \centering
## \begin{tabular}{rrrrr}
##   \hline
##  &amp; Estimate &amp; Std. Error &amp; t value &amp; Pr($&gt;$$|$t$|$) \\ 
##   \hline
## (Intercept) &amp; -216633.67 &amp; 212125.46 &amp; -1.02 &amp; 0.31 \\ 
##   X &amp; 183687.17 &amp; 43469.58 &amp; 4.23 &amp; 0.00 \\ 
##    \hline
## \end{tabular}
## \end{table}</code></pre>
<ul>
<li class="fragment">Note that this is the same as the output from <code>xtable(dat.lm)</code></li>
</ul>
</div>
</section>
<section id="pretty-it-up" class="slide level1">
<h1>Pretty it up</h1>
<ul>
<li class="fragment">Now let’s make some changes to what <code>xtable</code> spits out:</li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">xtable</span>(dat.lm, <span class="dt">digits =</span> <span class="dv">1</span>), <span class="dt">booktabs =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>## % latex table generated in R 3.0.2 by xtable 1.7-1 package
## % Tue Jan 28 23:20:03 2014
## \begin{table}[ht]
## \centering
## \begin{tabular}{rrrrr}
##   \toprule
##  &amp; Estimate &amp; Std. Error &amp; t value &amp; Pr($&gt;$$|$t$|$) \\ 
##   \midrule
## (Intercept) &amp; -216633.7 &amp; 212125.5 &amp; -1.0 &amp; 0.3 \\ 
##   X &amp; 183687.2 &amp; 43469.6 &amp; 4.2 &amp; 0.0 \\ 
##    \bottomrule
## \end{tabular}
## \end{table}</code></pre>
<ul>
<li class="fragment">Many more options, see <code>?xtable</code> and <code>?print.xtable</code></li>
</ul>
</div>
</section>
<section id="apsrtable" class="slide level1">
<h1>apsrtable</h1>
<ul>
<li class="fragment">Read the documentation - there are many options.</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(apsrtable)
dat.lm2 &lt;-<span class="st"> </span><span class="kw">lm</span>(Y ~<span class="st"> </span>X +<span class="st"> </span><span class="dv">0</span>, <span class="dt">data =</span> dat)
<span class="kw">apsrtable</span>(dat.lm, dat.lm2)</code></pre>
<pre><code>## \begin{table}[!ht]
## \caption{}
## \label{} 
## \begin{tabular}{ l D{.}{.}{2}D{.}{.}{2} } 
## \hline 
##   &amp; \multicolumn{ 1 }{ c }{ Model 1 } &amp; \multicolumn{ 1 }{ c }{ Model 2 } \\ \hline
##  %            &amp; Model 1      &amp; Model 2     \\ 
## (Intercept)  &amp; -216633.67   &amp;             \\ 
##              &amp; (212125.46)  &amp;             \\ 
## X            &amp; 183687.17 ^* &amp; 182921.71 ^*\\ 
##              &amp; (43469.58)   &amp; (43464.06)   \\
##  $N$          &amp; 1000         &amp; 1000        \\ 
## $R^2$        &amp; 0.02         &amp; 0.02        \\ 
## adj. $R^2$   &amp; 0.02         &amp; 0.02        \\ 
## Resid. sd    &amp; 6706998.86   &amp; 6707143.05   \\ \hline
##  \multicolumn{3}{l}{\footnotesize{Standard errors in parentheses}}\\
## \multicolumn{3}{l}{\footnotesize{$^*$ indicates significance at $p&lt; 0.05 $}} 
## \end{tabular} 
##  \end{table}</code></pre>
</section>
<section id="apsrtable-1" class="slide level1">
<h1>apsrtable</h1>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(png)
<span class="kw">library</span>(grid)
img &lt;-<span class="st"> </span><span class="kw">readPNG</span>(<span class="st">&quot;apsrtable.png&quot;</span>)
<span class="kw">grid.raster</span>(img)</code></pre>
<figure>
<img src="figure/unnamed-chunk-67.png" />
</figure>
</section>
<section id="stargazer" class="slide level1">
<h1>stargazer</h1>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(stargazer)
<span class="kw">stargazer</span>(dat.lm, dat.lm2)</code></pre>
<pre><code>## 
## % Table created by stargazer v.4.5.3 by Marek Hlavac, Harvard University. E-mail: hlavac at fas.harvard.edu
## % Date and time: Tue, Jan 28, 2014 - 23:20:04
## \begin{table}[!htbp] \centering 
##   \caption{} 
##   \label{} 
## \begin{tabular}{@{\extracolsep{5pt}}lcc} 
## \\[-1.8ex]\hline 
## \hline \\[-1.8ex] 
##  &amp; \multicolumn{2}{c}{\textit{Dependent variable:}} \\ 
## \cline{2-3} 
## \\[-1.8ex] &amp; \multicolumn{2}{c}{Y} \\ 
## \\[-1.8ex] &amp; (1) &amp; (2)\\ 
## \hline \\[-1.8ex] 
##  X &amp; 183,687.000$^{***}$ &amp; 182,922.000$^{***}$ \\ 
##   &amp; (43,470.000) &amp; (43,464.000) \\ 
##   &amp; &amp; \\ 
##  Constant &amp; $-$216,634.000 &amp;  \\ 
##   &amp; (212,125.000) &amp;  \\ 
##   &amp; &amp; \\ 
## \hline \\[-1.8ex] 
## Observations &amp; 1,000 &amp; 1,000 \\ 
## R$^{2}$ &amp; 0.018 &amp; 0.017 \\ 
## Adjusted R$^{2}$ &amp; 0.017 &amp; 0.016 \\ 
## Residual Std. Error &amp; 6,706,999.000 (df = 998) &amp; 6,707,143.000 (df = 999) \\ 
## F Statistic &amp; 17.860$^{***}$ (df = 1; 998) &amp; 17.710$^{***}$ (df = 1; 999) \\ 
## \hline 
## \hline \\[-1.8ex] 
## \textit{Note:}  &amp; \multicolumn{2}{r}{$^{*}$p$&lt;$0.1; $^{**}$p$&lt;$0.05; $^{***}$p$&lt;$0.01} \\ 
## \normalsize 
## \end{tabular} 
## \end{table}</code></pre>
</section>
<section id="stargazer-1" class="slide level1">
<h1>stargazer</h1>
<pre class="sourceCode r"><code class="sourceCode r">img &lt;-<span class="st"> </span><span class="kw">readPNG</span>(<span class="st">&quot;stargazer.png&quot;</span>)
<span class="kw">grid.raster</span>(img)</code></pre>
<figure>
<img src="figure/unnamed-chunk-69.png" />
</figure>
</section>
<section id="both" class="slide level1">
<h1>Both</h1>
<ul>
<li class="fragment"><p>Both packages are good (and can be supplemented with <code>xtable</code> when it is easier)</p></li>
<li class="fragment"><p>Get pretty close to what you want with these packages, and then tweak the LaTeX directly.</p></li>
</ul>
</section>
<section id="plotting" class="slide level1">
<h1>Plotting</h1>
<ul>
<li class="fragment">It’s all about coordinate pairs.</li>
<li class="fragment"><code>plot(x,y)</code> plots the pairs of points in <code>x</code> and <code>y</code></li>
<li class="fragment">Notable options:
<ul>
<li class="fragment"><code>type</code> - determines whether you plot points, lines or whatnot</li>
<li class="fragment"><code>pch</code> - determines plotting character</li>
<li class="fragment"><code>xlim</code> - x limits of the plot (likewise for <code>y</code>)</li>
<li class="fragment"><code>xlab</code> - label on the x-axis</li>
<li class="fragment"><code>main</code> - main plot label</li>
<li class="fragment"><code>col</code> - color</li>
<li class="fragment">A massive number of options. Read the docs.</li>
</ul></li>
<li class="fragment">Some objects respond specially to <code>plot</code>. Try <code>plot(dat.lm)</code></li>
</ul>
</section>
<section id="tying-it-together" class="slide level1">
<h1>Tying it Together</h1>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">seq</span>(-<span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">0.01</span>)
y &lt;-<span class="st"> </span><span class="dv">3</span>/<span class="dv">4</span> *<span class="st"> </span>(<span class="dv">1</span> -<span class="st"> </span>x^<span class="dv">2</span>)
<span class="kw">plot</span>(x, y, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;h&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;weight&quot;</span>)</code></pre>
<figure>
<img src="figure/unnamed-chunk-70.png" />
</figure>
</section>
<section id="tying-it-together-1" class="slide level1">
<h1>Tying it Together</h1>
<ul>
<li class="fragment"><span class="math">\(W\)</span> is an <span class="math">\(n\times p\)</span> diagonal weighting matrix, <span class="math">\(h\)</span> is a “bandwidth”.</li>
<li class="fragment">Diagonal entries are <span class="math">\(\frac{3}{4}\cdot(1-d^2)\cdot 1_{\{|d|\le 1\}}\)</span> where <span class="math">\(d = \frac{X-c}{h}\)</span></li>
<li class="fragment"><span class="math">\(\hat{\beta}_c = (X&#39;WX)^{-1}X&#39;WY\)</span></li>
<li class="fragment">Covariance matrix is <span class="math">\(s^2(X&#39;WX)^{-1}\)</span></li>
</ul>
<div class="fragment">
<pre class="sourceCode r"><code class="sourceCode r">loc.lin &lt;-<span class="st"> </span>function(Y, X, <span class="dt">c =</span> <span class="dv">0</span>, <span class="dt">bw =</span> <span class="kw">sd</span>(X)/<span class="dv">2</span>) {
    d &lt;-<span class="st"> </span>(X -<span class="st"> </span>c)/bw
    W &lt;-<span class="st"> </span><span class="dv">3</span>/<span class="dv">4</span> *<span class="st"> </span>(<span class="dv">1</span> -<span class="st"> </span>d^<span class="dv">2</span>) *<span class="st"> </span>(<span class="kw">abs</span>(d) &lt;<span class="st"> </span><span class="dv">1</span>)
    W &lt;-<span class="st"> </span><span class="kw">diag</span>(W)
    X &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="dv">1</span>, d)
    b &lt;-<span class="st"> </span><span class="kw">solve</span>(<span class="kw">t</span>(X) %*%<span class="st"> </span>W %*%<span class="st"> </span>X) %*%<span class="st"> </span><span class="kw">t</span>(X) %*%<span class="st"> </span>W %*%<span class="st"> </span>Y
    sigma &lt;-<span class="st"> </span><span class="kw">t</span>(Y -<span class="st"> </span>X %*%<span class="st"> </span>b) %*%<span class="st"> </span>W %*%<span class="st"> </span>(Y -<span class="st"> </span>X %*%<span class="st"> </span>b)/(<span class="kw">sum</span>(<span class="kw">diag</span>(W) &gt;<span class="st"> </span><span class="dv">0</span>) -<span class="st"> </span><span class="dv">2</span>)
    sigma &lt;-<span class="st"> </span><span class="kw">solve</span>(<span class="kw">t</span>(X) %*%<span class="st"> </span>W %*%<span class="st"> </span>X) *<span class="st"> </span><span class="kw">c</span>(sigma)
    <span class="kw">return</span>(<span class="kw">c</span>(<span class="dt">est =</span> b[<span class="dv">1</span>], <span class="dt">se =</span> <span class="kw">sqrt</span>(<span class="kw">diag</span>(sigma))[<span class="dv">1</span>]))
}</code></pre>
</div>
</section>
<section id="fit-the-surface" class="slide level1">
<h1>Fit the Surface</h1>
<pre class="sourceCode r"><code class="sourceCode r">X.est &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="fl">0.1</span>)
dat.llm &lt;-<span class="st"> </span><span class="kw">sapply</span>(X.est, function(x) <span class="kw">loc.lin</span>(Y, X, <span class="dt">c =</span> x, <span class="dt">bw =</span> <span class="fl">0.25</span>))
<span class="kw">plot</span>(X, Y, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(-<span class="dv">50</span>, <span class="dv">50</span>), <span class="dt">pch =</span> <span class="dv">20</span>)
<span class="kw">lines</span>(X.est, dat.llm[<span class="dv">1</span>, ], <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)
<span class="kw">lines</span>(X.est, dat.llm[<span class="dv">1</span>, ] +<span class="st"> </span><span class="fl">1.96</span> *<span class="st"> </span>dat.llm[<span class="dv">2</span>, ], <span class="dt">col =</span> <span class="st">&quot;pink&quot;</span>)
<span class="kw">lines</span>(X.est, dat.llm[<span class="dv">1</span>, ] -<span class="st"> </span><span class="fl">1.96</span> *<span class="st"> </span>dat.llm[<span class="dv">2</span>, ], <span class="dt">col =</span> <span class="st">&quot;pink&quot;</span>)</code></pre>
<figure>
<img src="figure/unnamed-chunk-72.png" />
</figure>
</section>
    </div>
  </div>

  <script src="reveal.js/lib/js/head.min.js"></script>
  <script src="reveal.js/js/reveal.min.js"></script>

  <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        theme: 'simple', // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
//          { src: 'reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; }, }
//          { src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
]});
    </script>
  </body>
</html>
